
<div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px" style="background-color: #327ebd;margin-top: -20px;margin-left:
-20px;height:80px;width:105%;color:white !important">
<div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">

 <h2 mat-dialog-title>{{title}} Visitor</h2>
</div>
<div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
 <button style="margin-left: 75%" mat-raised-button color="secondary" mat-button mat-dialog-close><i
     class="material-icons">
     clear
   </i></button>
</div>
</div>

<!-- <mat-dialog-actions>
 <button mat-button mat-dialog-close>No</button>
 <button mat-button [mat-dialog-close]="true">Yes</button>
 </mat-dialog-actions> -->

<div class="border">
<form class="example-form">
 <div class="ssss">
   <mat-accordion>
     <mat-expansion-panel [expanded]="true">
       <mat-expansion-panel-header>
         <mat-panel-title>
           Personal Details
         </mat-panel-title>
         <mat-panel-description>
         </mat-panel-description>
       </mat-expansion-panel-header>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input matInput name="fName" placeholder="First Name" [(ngModel)]="visitor.fName"
               [formControl]="fnameFormControls" [ngModelOptions]="{standalone: true}"  
               (ngModelChange)="visitor.fName= $event.toUpperCase()">
             <!-- <mat-error *ngIf="fnameFormControls.hasError('pattern')">
         Please enter a valid Name
       </mat-error>
     <mat-error *ngIf="fnameFormControls.hasError('required')">
         First Name is <strong>required</strong>
       </mat-error> -->
           </mat-form-field>

           <!-- <div class="validation-errors">
     <ng-container *ngFor="let validation of validation_messages.fnameFormControls">
       <div class="error-message"
         *ngIf="validations_form.get('fnameFormControls').hasError(validation.type) && (validations_form.get('fnameFormControls').dirty || validations_form.get('fnameFormControls').touched)">
        <mat-icon name="information-circle-outline"></mat-icon> 
           {{ validation.message }} 
       </div>
     </ng-container>
   </div> -->
           <div class="error-message">
             <span *ngIf="error!=undefined">{{error}}</span>
           </div>

         </div>
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">


           <mat-form-field class="example-full-width">
             <input matInput name="lName" placeholder="Last Name" [(ngModel)]="visitor.lName"
               [formControl]="lnameFormControls" [ngModelOptions]="{standalone: true}"  
               (ngModelChange)="visitor.lName= $event.toUpperCase()">
             <!-- <mat-error *ngIf="lnameFormControls.hasError('pattern')">
         Please enter a valid Name
       </mat-error>
     <mat-error *ngIf="lnameFormControls.hasError('required')">
         Last Name is <strong>required</strong>
       </mat-error> -->
           </mat-form-field>
           <!-- <div class="validation-errors">
     <ng-container *ngFor="let validation of validation_messages.lnameFormControls">
       <div class="error-message"
         *ngIf="validations_form.get('lnameFormControls').hasError(validation.type) && (validations_form.get('lnameFormControls').dirty || validations_form.get('lnameFormControls').touched)">
        <mat-icon name="information-circle-outline"></mat-icon> 
           {{ validation.message }} 
       </div>
     </ng-container>
   </div> -->
           <div class="error-message">
             <span *ngIf="error!=undefined">{{error}}</span>
           </div>
         </div>
       </div>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">


           <mat-form-field class="example-full-width">
             <span matPrefix>+91 &nbsp;</span>
             <input type="tel" matInput name="mobNum" pattern="[0-9]*" maxlength="10" placeholder="Mobile Number"
               [(ngModel)]="visitor.p_mobile_no" [formControl]="p_mobile_noFormControls"
               [ngModelOptions]="{standalone: true}" (ngModelChange)="visitor.p_mobile_no= $event.toUpperCase()">
             <!-- <mat-error *ngIf="p_mobile_noFormControls.hasError('pattern')">
         Please enter a valid MobNo
       </mat-error>    
     <mat-error *ngIf="p_mobile_noFormControls .hasError('required')">
         Mobile Number is <strong>required</strong>
       </mat-error> -->
           </mat-form-field>
           <div class="error-message">
             <span *ngIf="error!=undefined">{{error}}</span>
           </div>
           <!-- <div class="validation-errors">
   <ng-container *ngFor="let validation of validation_messages.p_mobile_noFormControls">
     <div class="error-message"
       *ngIf="validations_form.get('p_mobile_noFormControls').hasError(validation.type) && (validations_form.get('p_mobile_noFormControls').dirty || validations_form.get('p_mobile_noFormControls').touched)">
      <mat-icon name="information-circle-outline"></mat-icon> 
         {{ validation.message }} 
     </div>
   </ng-container>
 </div> -->
         </div>

         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">


           <mat-form-field class="example-full-width">
             <input matInput placeholder="Email" name="email" [formControl]="emailFormControls"
               [(ngModel)]="visitor.email" [ngModelOptions]="{standalone: true}" >
             <!-- <mat-error *ngIf="emailFormControls.hasError('pattern')">
       Please enter a valid email address
     </mat-error>
     <mat-error *ngIf="emailFormControls.hasError('required')">
       Email is <strong>required</strong>
     </mat-error> -->

           </mat-form-field>
           <div class="error-message">
             <span *ngIf="error!=undefined">{{error}}</span>
           </div>

           <!-- <div class="validation-errors">
     <ng-container *ngFor="let validation of validation_messages.emailFormControls">
       <div class="error-message"
         *ngIf="validations_form.get('emailFormControls').hasError(validation.type) && (validations_form.get('emailFormControls').dirty || validations_form.get('emailFormControls').touched)">
        <mat-icon name="information-circle-outline"></mat-icon> 
           {{ validation.message }} 
       </div>
     </ng-container>
   </div>    -->
         </div>
       </div>



       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input type="tel" name="companyName" [(ngModel)]="visitor.compony_name"
               [ngModelOptions]="{standalone: true}" matInput placeholder="Company Name"
               (ngModelChange)="visitor.compony_name= $event.toUpperCase()">
           </mat-form-field>
         </div>
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field>
             <mat-select placeholder="Select Location" [(ngModel)]="visitor.loc_id" multiple
               (ngModelChange)="accesslist(visitor.loc_id)" [ngModelOptions]="{standalone: true}">
               <mat-option *ngFor="let loc of location"  [value]="loc.loc_id">
                 {{loc.loc_name +"     "+"  "+loc.description}}</mat-option>

             </mat-select>
           </mat-form-field>

         </div>
       </div>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">

         <div fxFlex.xs="100" fxFlex.lg="100" fxFlex.md="100" fxFlex.sm="100">
           <mat-form-field class="example-full-width">
             <textarea matInput name="address" [(ngModel)]="visitor.p_address" [ngModelOptions]="{standalone: true}"
               placeholder="Address"></textarea>
           </mat-form-field>
         </div>

         <mat-form-field class="example-full-width">
             <textarea matInput name="pinCode" placeholder="Host Name" 
             [ngModelOptions]="{standalone: true}"
               [(ngModel)]="visitor.hostname"></textarea>
           </mat-form-field>
       </div>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input type="tel" name="city" [(ngModel)]="visitor.city" [ngModelOptions]="{standalone: true}" matInput
               placeholder="City" (ngModelChange)="visitor.city= $event.toUpperCase()">
           </mat-form-field>
         </div>
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input name="state" [(ngModel)]="visitor.state" [ngModelOptions]="{standalone: true}" matInput
               placeholder="state" (ngModelChange)="visitor.state= $event.toUpperCase()">
           </mat-form-field>
         </div>
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
          <mat-form-field class="example-full-width">
            <input name="adharno" [(ngModel)]="visitor.aadhar_no" [ngModelOptions]="{standalone: true}" matInput
              placeholder="Aadhar No">
          </mat-form-field>
        </div>
       </div>
     </mat-expansion-panel>
   </mat-accordion>
 </div>
 <mat-divider></mat-divider>



 <span *ngIf="case==2" style="padding: 10px">
   <mat-accordion>
     <mat-expansion-panel [expanded]="true">
       <mat-expansion-panel-header>
         <mat-panel-title>
           Appointment Details
         </mat-panel-title>
         <mat-panel-description>

         </mat-panel-description>
       </mat-expansion-panel-header>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input matInput [matDatepicker]="picker3" placeholder="Date" [ngModelOptions]="{standalone: true}"
               [(ngModel)]="date.value" (ngModelChange)="OnDateChange(date.value)"
               [ngModelOptions]="{standalone: true}">
             <mat-datepicker-toggle matSuffix [for]="picker3"></mat-datepicker-toggle>
             <mat-datepicker #picker3></mat-datepicker>
           </mat-form-field>
         </div>
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input matInput name="time" [(ngModel)]="visitor.appoint_time" [ngModelOptions]="{standalone: true}"
               [formControl]="timeFormControls" placeholder="time" [ngModelOptions]="{standalone: true}">
             <!-- <mat-error *ngIf="timeFormControls.hasError('required')">
             Date is <strong>required</strong>
           </mat-error> -->
           </mat-form-field>
         </div>
       </div>

       <!-- <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
<div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50"> 
   <mat-form-field class="example-full-width">
     <input  name="in" [(ngModel)]="visitor.check_in" matInput placeholder="Check In">
   </mat-form-field>
</div>
<div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
     <mat-form-field class="example-full-width">
         <input matInput name="out" [(ngModel)]="visitor.check_out" placeholder="Check Out">
       </mat-form-field>
</div>
</div> -->
     </mat-expansion-panel>
   </mat-accordion>
 </span>






 <div *ngIf="add_vehicle == true || v !== undefined">
   <mat-accordion>
     <mat-expansion-panel [expanded]="true">
       <mat-expansion-panel-header>
         <mat-panel-title>
           Vehicle Details
         </mat-panel-title>
         <mat-panel-description>

         </mat-panel-description>
       </mat-expansion-panel-header>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input type="tel" name="vehicle_name" matInput placeholder="Vehicle Name"
               [ngModelOptions]="{standalone: true}" [(ngModel)]="vehicle.vehicle_name" 
               (ngModelChange)="vehicle.vehicle_name= $event.toUpperCase()">
           </mat-form-field>
         </div>
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input matInput name="vehicle_no" placeholder="Vehicle Number" [ngModelOptions]="{standalone: true}"
               [(ngModel)]="vehicle.vehicle_no" (ngModelChange)="vehicle.vehicle_no = $event.toUpperCase()">
           </mat-form-field>
         </div>
       </div>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input type="tel" name="driver_name" matInput placeholder="Driver Name"
               [ngModelOptions]="{standalone: true}" [(ngModel)]="vehicle.driver_name" 
               (ngModelChange)="vehicle.driver_name = $event.toUpperCase()">
           </mat-form-field>
         </div>
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input matInput name="licene_no" placeholder="License Number" [ngModelOptions]="{standalone: true}"
               [(ngModel)]="vehicle.licene_no" (ngModelChange)="vehicle.licene_no = $event.toUpperCase()">
           </mat-form-field>
         </div>
       </div>
       <div fxLayout="row" fxLayout.lt-sm="column" fxLayoutGap="20px">
         <div fxFlex.xs="100" fxFlex.lg="50" fxFlex.md="50" fxFlex.sm="50">
           <mat-form-field class="example-full-width">
             <input type="tel" name="tranp_name" matInput placeholder="Transport Name"
               [ngModelOptions]="{standalone: true}" [(ngModel)]="vehicle.tranp_name" (ngModelChange)="vehicle.tranp_name = $event.toUpperCase()">
           </mat-form-field>
         </div>
       </div>
     </mat-expansion-panel>
   </mat-accordion>
 </div>
 <div *ngIf="isenable==true" style="margin-top: 20px">
   <span *ngIf="v == undefined || fromAppointment == false">
     <button mat-raised-button class="add" (click)="displayvehicle()" id="add_vehicle">Add Vehicle</button>

   </span>
 </div>
</form>
</div>




<mat-dialog-actions align="end">
<button mat-raised-button color="secondary" mat-button mat-dialog-close>Cancel</button>
<button mat-raised-button color="primary" mat-button class="submit-button"
 (click)="openConfirmationDialog(vehicle,visitor)">Save</button>
</mat-dialog-actions>